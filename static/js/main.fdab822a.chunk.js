(window["webpackJsonp04-tournament-table"]=window["webpackJsonp04-tournament-table"]||[]).push([[0],{124:function(e,a,t){e.exports={formContainer:"AddPlayerForm_formContainer__vRE6w"}},129:function(e,a,t){e.exports=t(278)},197:function(e,a,t){},24:function(e,a,t){e.exports={matchContainer:"Match_matchContainer__2QGpa",match:"Match_match__3V5US",player:"Match_player__3MOou",name:"Match_name__1ms8P",score:"Match_score__2nwvG"}},278:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(17),c=t.n(l),i=t(128),o=t(22),s=t(8),m=t(286),u=t(90),d=t(55);function y(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?y(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var p="tournament-table/playersReducer/ADD_PLAYER",P="tournament-table/playersReducer/SELECT_PLAYER",b="tournament-table/playersReducer/ADD_PLAYER_TO_SELECTION",h="tournament-table/playersReducer/REMOVE_PLAYER_FROM_SELECTION",S="tournament-table/playersReducer/APPLY_FINAL_RATING",E={players:[{id:1,name:"Raman Tamilin",rating:100,selected:!1},{id:2,name:"Alina Dubenok",rating:110,selected:!1},{id:3,name:"Avery Reid",rating:120,selected:!1},{id:4,name:"Jamie Edwards",rating:130,selected:!1},{id:5,name:"Kaia Leon",rating:140,selected:!1},{id:6,name:"Jack Davies",rating:150,selected:!1},{id:7,name:"Jude Law",rating:160,selected:!1},{id:8,name:"Dale Cooper",rating:170,selected:!1},{id:9,name:"Daniella Floyd",rating:180,selected:!1},{id:10,name:"Jack Brady",rating:190,selected:!1}],selectedPlayers:[]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case p:return f({},e,{players:[].concat(Object(u.a)(e.players),[a.newPlayer])});case P:return f({},e,{players:e.players.map((function(e){return e.id===a.id?f({},e,{selected:!e.selected}):e}))});case b:return f({},e,{selectedPlayers:[].concat(Object(u.a)(e.selectedPlayers),[a.player])});case h:return f({},e,{selectedPlayers:e.selectedPlayers.filter((function(e){return e.id!==a.player.id}))});case"tournament-table/playersReducer/REMOVE_ALL_PLAYERS_FROM_SELECTION":return f({},e,{players:e.players.map((function(e){return f({},e,{selected:!1})})),selectedPlayers:[]});case S:return f({},e,{players:e.players.map((function(e){var t=a.increment.find((function(a){return e.id===a.id}))||{increment:0};return f({},e,{rating:e.rating+t.increment})}))});default:return e}};function _(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?_(t,!0).forEach((function(a){Object(d.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var O="tournament-table/tableReducer/FORM_TABLE",v="tournament-table/tableReducer/ADD_QUARTERFINALS_RESULT",R="tournament-table/tableReducer/ADD_SEMIFINALS_RESULT",A="tournament-table/tableReducer/FILL_QUARTERFINALS_SCORE",T="tournament-table/tableReducer/FILL_SEMIFINALS_SCORE",j="tournament-table/tableReducer/FILL_FINALS_SCORE",C="tournament-table/tableReducer/CHANGE_RATING",N={isTableFormed:!1,matchesQuarterfinals:[{id:1,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0},{id:2,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0},{id:3,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0},{id:4,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0}],matchesSemifinals:[{id:5,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0},{id:6,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0}],matchesFinals:[{id:7,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0}],ratingIncrement:[{id:1,increment:0},{id:2,increment:0},{id:3,increment:0},{id:4,increment:0},{id:5,increment:0},{id:6,increment:0},{id:7,increment:0},{id:8,increment:0}]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case O:return F({},e,{isTableFormed:!0,matchesQuarterfinals:[{id:1,firstPlayer:a.players[0],secondPlayer:a.players[7],firstPlayerScore:0,secondPlayerScore:0},{id:2,firstPlayer:a.players[3],secondPlayer:a.players[4],firstPlayerScore:0,secondPlayerScore:0},{id:3,firstPlayer:a.players[2],secondPlayer:a.players[5],firstPlayerScore:0,secondPlayerScore:0},{id:4,firstPlayer:a.players[1],secondPlayer:a.players[6],firstPlayerScore:0,secondPlayerScore:0}],matchesSemifinals:[{id:5,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0},{id:6,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0}],matchesFinals:[{id:7,firstPlayer:{name:"TBA"},secondPlayer:{name:"TBA"},firstPlayerScore:0,secondPlayerScore:0}],ratingIncrement:a.selectedIds});case v:return F({},e,{matchesSemifinals:e.matchesSemifinals.map((function(e){return(5!==e.id||1!==a.id&&2!==a.id)&&(6!==e.id||3!==a.id&&4!==a.id)?e:"top"===a.position?F({},e,{firstPlayer:F({},a.player)}):F({},e,{secondPlayer:F({},a.player)})}))});case R:return F({},e,{matchesFinals:e.matchesFinals.map((function(e){return"top"===a.position?F({},e,{firstPlayer:F({},a.player)}):F({},e,{secondPlayer:F({},a.player)})}))});case A:return F({},e,{matchesQuarterfinals:e.matchesQuarterfinals.map((function(e){return e.id===a.id?F({},e,{firstPlayerScore:a.firstPlayerScore,secondPlayerScore:a.secondPlayerScore}):e}))});case T:return F({},e,{matchesSemifinals:e.matchesSemifinals.map((function(e){return e.id===a.id?F({},e,{firstPlayerScore:a.firstPlayerScore,secondPlayerScore:a.secondPlayerScore}):e}))});case j:return F({},e,{isTableFormed:!1,matchesFinals:e.matchesFinals.map((function(e){return F({},e,{firstPlayerScore:a.firstPlayerScore,secondPlayerScore:a.secondPlayerScore})}))});case C:return F({},e,{ratingIncrement:e.ratingIncrement.map((function(e){return e.id===a.id1?F({},e,{increment:a.firstPlayer}):e.id===a.id2?F({},e,{increment:a.secondPlayer}):e}))});default:return e}},L="tournament-table/formReducer/CLEAR_FORM",I=Object(s.b)({players:g,table:w,form:m.a.plugin({addPlayer:function(e,a){switch(a.type){case L:return;default:return e}},matchResults:function(e,a){switch(a.type){case L:return;default:return e}}})}),B=function(){return{type:L}},M=Object(s.d)(I),D=(t(197),t(84)),k=t.n(D),Q=t(23),x=t(38),Y=t.n(x),V=n.a.memo((function(e){var a=e.player,t=a.name,r=a.rating;return n.a.createElement("div",null,n.a.createElement("span",null,"".concat(t," (").concat(r,")")))})),J=t(285),G=t(284),U=t(124),H=t.n(U),X=function(e){if(!e)return"Field is required"},z=function(e){return e&&!e.match(/^\d+$/)?"Value should be a number":e&&e.length>4?"Maximum 4 digits":void 0},W=function(e){return e.match(/^[a-zA-Z]+( [a-zA-Z]+)*$/)?e.length>30?"Maximum 30 symbols":void 0:"Value should be a string"},Z=t(62),$=t(85),q=t.n($),K=t(56),ee=t.n(K),ae=function(e){e.input;var a=e.meta,t=Object(Z.a)(e,["input","meta"]),r=a.error&&a.touched,l=r?q.a.error:"";return n.a.createElement("div",{className:"".concat(q.a.formControl," ").concat(l)},n.a.createElement("div",null,t.children),r&&n.a.createElement("span",null,a.error))},te=function(e){var a=e.input,t=(e.meta,e.child,Object(Z.a)(e,["input","meta","child"]));return n.a.createElement(ae,e,n.a.createElement(ee.a.Control,Object.assign({},a,t)))},re=t(19),ne=t.n(re),le=n.a.memo((function(e){return n.a.createElement("form",{onSubmit:e.handleSubmit,className:H.a.formContainer},n.a.createElement(J.a,{component:te,name:"name",placeholder:"Player's name",validate:[X,W]}),n.a.createElement(J.a,{component:te,name:"rating",placeholder:"Player's rating",validate:[X,z]}),n.a.createElement("div",null,n.a.createElement(ne.a,{variant:"outline-success",type:"submit"},"Add"),n.a.createElement(ne.a,{variant:"outline-danger",type:"button",onClick:e.toggleAddPlayerForm},"Close")))})),ce=Object(G.a)({form:"addPlayer"})(le),ie=n.a.memo((function(e){return n.a.createElement(ce,{onSubmit:function(a){var t={id:Math.random().toFixed(5),name:a.name,rating:+a.rating};e.addPlayer(t),e.clearForm(),e.toggleAddPlayerForm()},toggleAddPlayerForm:e.toggleAddPlayerForm})})),oe=t(64),se=t.n(oe),me=n.a.memo((function(e){return n.a.createElement("div",{className:se.a.filterContainer},n.a.createElement(ee.a.Control,{value:e.filterValue,onChange:e.changeFilter,className:se.a.filter,type:"text",placeholder:"Search by name"}),n.a.createElement(ne.a,{onClick:e.clearFilter,variant:"danger",className:se.a.filterButton},"X"))})),ue=t(37),de=t.n(ue),ye=t(60),fe=t.n(ye),pe=t(61),Pe=t.n(pe),be=n.a.memo((function(e){return n.a.createElement("div",{className:Y.a.players},e.playersElements)})),he=n.a.memo((function(e){var a=Object(r.useState)(!1),t=Object(Q.a)(a,2),l=t[0],c=t[1],i=Object(r.useState)(""),o=Object(Q.a)(i,2),s=o[0],m=o[1],u=function(){c(!l)},d=Object(r.useState)(!1),y=Object(Q.a)(d,2),f=y[0],p=y[1],P=Object(r.useState)(""),b=Object(Q.a)(P,2),h=b[0],S=b[1],E=Object(r.useRef)(null);Object(r.useEffect)((function(){}),[f]);var g=e.players.filter((function(e){return e.name.toLowerCase().includes(s,0)})).sort((function(e,a){return e.rating<a.rating?1:-1})).map((function(a){var t=a.selected?Y.a.selected:"";return n.a.createElement(de.a.Item,{key:a.id,onClick:function(){return function(a){a.selected?(e.removePlayerFromSelection(a),e.togglePlayerSelection(a.id)):e.selectedPlayers.length<8?(e.addPlayerToSelection(a),e.togglePlayerSelection(a.id)):(S("You can't add more than 8 players"),p(!0))}(a)},className:"".concat(t," ").concat(Y.a.player)},n.a.createElement(V,{player:a}))}));return n.a.createElement("div",{className:Y.a.playersContainer},n.a.createElement("h3",{className:Y.a.title},"Select players"),n.a.createElement(me,{filterValue:s,changeFilter:function(e){m(e.currentTarget.value)},clearFilter:function(){m("")}}),n.a.createElement(be,{playersElements:g}),l?n.a.createElement(ie,{toggleAddPlayerForm:u,addPlayer:e.addPlayer,clearForm:e.clearForm}):n.a.createElement(n.a.Fragment,null,n.a.createElement(ne.a,{variant:"outline-success",onClick:u},"Add new player"),n.a.createElement(ne.a,{variant:"outline-success",ref:E,onClick:function(){if(e.isTableFormed)S("Table has already been formed!"),p(!0);else if(8===e.selectedPlayers.length){var a=e.selectedPlayers.map((function(e){return e})).sort((function(e,a){return e.rating<a.rating?1:-1})),t=[];a.forEach((function(e){t.push({id:e.id,increment:0})})),e.formTable(a,t),e.removeAllPlayersFromSelection()}else S("You should add exactly 8 players"),p(!0)}},"Form a table")),n.a.createElement(fe.a,{target:E.current,show:f,placement:"right",onEntered:function(){setTimeout((function(){p(!1)}),2e3)}},(function(e){return n.a.createElement(Pe.a,e,h)})))})),Se=Object(s.c)(Object(o.b)((function(e){return{players:e.players.players,selectedPlayers:e.players.selectedPlayers,isTableFormed:e.table.isTableFormed}}),{togglePlayerSelection:function(e){return{type:P,id:e}},addPlayerToSelection:function(e){return{type:b,player:e}},removePlayerFromSelection:function(e){return{type:h,player:e}},addPlayer:function(e){return{type:p,newPlayer:e}},formTable:function(e,a){return{type:O,players:e,selectedIds:a}},removeAllPlayersFromSelection:function(){return{type:"tournament-table/playersReducer/REMOVE_ALL_PLAYERS_FROM_SELECTION"}},clearForm:B}))(he),Ee=t(39),ge=t.n(Ee),_e=t(24),Fe=t.n(_e),Oe=t(31),ve=t.n(Oe),Re=n.a.memo((function(e){return n.a.createElement("form",{onSubmit:e.handleSubmit,className:ve.a.formContainer},n.a.createElement("div",null,n.a.createElement("div",{className:ve.a.player},n.a.createElement(J.a,{component:te,name:"firstPlayerScore",validate:[z],className:ve.a.score,placeholder:"".concat(e.firstPlayer.name," score")})),n.a.createElement("div",{className:ve.a.player},n.a.createElement(J.a,{component:te,name:"secondPlayerScore",validate:[z],className:ve.a.score,placeholder:"".concat(e.secondPlayer.name," score")}))),n.a.createElement("div",{className:ve.a.buttons},n.a.createElement(ne.a,{variant:"outline-success",ref:e.target,type:"submit"},"\u2713"),n.a.createElement(ne.a,{variant:"outline-danger",type:"button",onClick:e.closeForm},"X"),e.tooltip()))})),Ae=Object(G.a)({form:"matchResults"})(Re),Te=n.a.memo((function(e){var a=e.match,t=a.id,l=a.firstPlayer,c=a.secondPlayer,i=Object(r.useState)(!1),o=Object(Q.a)(i,2),s=o[0],m=o[1],u=Object(r.useRef)(null);return n.a.createElement(Ae,{onSubmit:function(a){var r=a.firstPlayerScore,n=void 0===r?0:r,i=a.secondPlayerScore,o=void 0===i?0:i;if(!("3"===n&&o<n)&&!("3"===o&&n<o))return m(!0);var s=t%2===0?"bottom":"top",u=null,d=null,y=null;n>o?(d=Math.ceil((100-l.rating+c.rating)/10),y=Math.ceil((100-l.rating+c.rating)/-20),u={name:l.name,rating:l.rating,id:l.id},e.changeRating(l.id,c.id,d,y)):(y=Math.ceil((100-l.rating+c.rating)/10),d=Math.ceil((100-l.rating+c.rating)/-20),u={name:c.name,rating:c.rating,id:c.id},e.changeRating(c.id,l.id,y,d)),t<=4?(e.addQuarterfinalsResult(t,u,s),e.fillQuarterfinalsScore(t,n,o)):5===t||6===t?(e.addSemifinalsResult(t,u,s),e.fillSemifinalsScore(t,n,o)):7===t&&(e.addFinalsResult(t,u,s),e.fillFinalsScore(t,n,o),e.applyFinalRating(e.ratingIncrement)),e.clearForm(),e.closeForm()},closeForm:e.closeForm,firstPlayer:l,secondPlayer:c,target:u,tooltip:function(){return n.a.createElement(fe.a,{target:u.current,show:s,placement:"right",onEntered:function(){setTimeout((function(){m(!1)}),2e3)}},(function(e){return n.a.createElement(Pe.a,e,"Score should be 3:2, 3:1 or 3:0")}))}})})),je=n.a.memo((function(e){var a=e.match,t=a.firstPlayer,r=a.secondPlayer,l=a.firstPlayerScore,c=a.secondPlayerScore;return n.a.createElement("div",{className:Fe.a.matchContainer,onClick:function(){var a=!("TBA"===t.name||"TBA"===r.name);e.openForm(e.match.id,a)}},n.a.createElement("div",{className:Fe.a.match},e.showResultsForm&&e.isFormOpen?n.a.createElement(de.a.Item,null,n.a.createElement(Te,Object.assign({},e,{closeForm:function(){e.closeForm()}}))):n.a.createElement(n.a.Fragment,null,n.a.createElement(de.a.Item,{className:Fe.a.player},n.a.createElement("div",{className:Fe.a.name},t.name),n.a.createElement("div",{className:Fe.a.score},l)),n.a.createElement(de.a.Item,{className:Fe.a.player},n.a.createElement("div",{className:Fe.a.name},r.name),n.a.createElement("div",{className:Fe.a.score},c)))))})),Ce=n.a.memo((function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:ge.a.title},"Tournament table"),n.a.createElement("div",{className:ge.a.tableContainer},n.a.createElement("div",{className:ge.a.matchContainer},e.matchesQuarterfinals),n.a.createElement("div",{className:ge.a.matchContainer},e.matchesSemifinals),n.a.createElement("div",{className:ge.a.matchContainer},e.matchesFinals)))})),Ne=Object(s.c)(Object(o.b)((function(e){return{matchesQuarterfinals:e.table.matchesQuarterfinals,matchesSemifinals:e.table.matchesSemifinals,matchesFinals:e.table.matchesFinals,ratingIncrement:e.table.ratingIncrement,isTableFormed:e.table.isTableFormed}}),{addQuarterfinalsResult:function(e,a,t){return{type:v,id:e,player:a,position:t}},addSemifinalsResult:function(e,a,t){return{type:R,id:e,player:a,position:t}},addFinalsResult:function(e,a,t){return{type:"tournament-table/tableReducer/ADD_FINALS_RESULT",id:e,player:a,position:t}},fillQuarterfinalsScore:function(e,a,t){return{type:A,id:e,firstPlayerScore:a,secondPlayerScore:t}},fillSemifinalsScore:function(e,a,t){return{type:T,id:e,firstPlayerScore:a,secondPlayerScore:t}},fillFinalsScore:function(e,a,t){return{type:j,id:e,firstPlayerScore:a,secondPlayerScore:t}},clearForm:B,changeRating:function(e,a,t,r){return{type:C,id1:e,id2:a,firstPlayer:t,secondPlayer:r}},applyFinalRating:function(e){return{type:S,increment:e}}}))((function(e){var a=Object(r.useState)(!1),t=Object(Q.a)(a,2),l=t[0],c=t[1],i=Object(r.useState)(null),o=Object(Q.a)(i,2),s=o[0],m=o[1],u=function(a,t){e.isTableFormed&&t&&(m(a),l||c(!0))},d=function(){c(!1)},y=function(a){return a.map((function(a){var t=s===a.id;return n.a.createElement(je,Object.assign({key:a.id,match:a},e,{openForm:u,closeForm:d,showResultsForm:l,isFormOpen:t}))}))},f=y(e.matchesQuarterfinals),p=y(e.matchesSemifinals),P=y(e.matchesFinals);return n.a.createElement(Ce,{matchesQuarterfinals:f,matchesSemifinals:p,matchesFinals:P})})),we=t(126),Le=t.n(we),Ie=t(57),Be=t.n(Ie),Me=t(127),De=t.n(Me),ke=n.a.memo((function(){return n.a.createElement("div",{className:k.a.app},n.a.createElement(Le.a,null,n.a.createElement(De.a,null,n.a.createElement(Be.a,{lg:"4"},n.a.createElement(Se,null)),n.a.createElement(Be.a,{lg:"8",className:k.a.table},n.a.createElement(Ne,null)))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(277);c.a.render(n.a.createElement(i.a,null,n.a.createElement(o.a,{store:M},n.a.createElement(ke,null))),document.getElementById("root")),window.store=M,"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),window.store=M},31:function(e,a,t){e.exports={formContainer:"MatchResults_formContainer__1rZ8B",buttons:"MatchResults_buttons__IJgsr",player:"MatchResults_player__2WTOO",score:"MatchResults_score__2z5P0"}},38:function(e,a,t){e.exports={playersContainer:"Players_playersContainer__1HgTt",title:"Players_title__1NbOH",players:"Players_players__uf2XP",player:"Players_player__2tslD",selected:"Players_selected__TmDHp"}},39:function(e,a,t){e.exports={tableContainer:"Table_tableContainer__1Ri5w",matchContainer:"Table_matchContainer__IASN7",title:"Table_title__F9P2F"}},64:function(e,a,t){e.exports={filterContainer:"Filter_filterContainer__2M1kd",filter:"Filter_filter__1CE08",filterButton:"Filter_filterButton__1aYh4"}},84:function(e,a,t){e.exports={app:"App_app__tR-Xx",table:"App_table__13esp"}},85:function(e,a,t){e.exports={formControl:"FormsControls_formControl__YNBGI",error:"FormsControls_error__1HYwl"}}},[[129,1,2]]]);
//# sourceMappingURL=main.fdab822a.chunk.js.map